{% extends "base.html" %}
{% block title %}Student Detail{% endblock %}

{% block content %}

<div class="card shadow p-4">

  <!-- =============================== -->
  <!-- Student Basic Info -->
  <!-- =============================== -->
  <h2 class="mb-3">Student Detail</h2>

  <ul class="list-group mb-4">
    <li class="list-group-item">
      <strong>ID:</strong> {{ student.student_id }}
    </li>
    <li class="list-group-item">
      <strong>Name:</strong> {{ student.first_name }} {{ student.last_name }}
    </li>
    <li class="list-group-item">
      <strong>Email:</strong> {{ student.email }}
    </li>
    <li class="list-group-item">
      <strong>Enrollment Year:</strong> {{ student.enrollment_year }}
    </li>
    <li class="list-group-item">
      <strong>GPA:</strong>
      {{ student.gpa if student.gpa is not none else 'N/A' }}
    </li>
    <li class="list-group-item">
      <strong>Status:</strong> {{ student.status }}
    </li>
    <li class="list-group-item">
      <strong>Department:</strong> {{ student.department_name }}
    </li>
  </ul>

  <!-- Action Buttons -->
  <div class="mb-4">
    <a href="{{ url_for('main.edit_student', student_id=student.student_id) }}" class="btn btn-warning btn-sm">
      Edit Student Info
    </a>
  </div>

  <!-- =============================== -->
  <!-- Enrollments -->
  <!-- =============================== -->
  <h3 class="mb-3">Enrollments</h3>

  <a class="btn btn-primary mb-3" href="{{ url_for('main.enroll_page', student_id=student.student_id) }}">
    + Enroll This Student
  </a>

  {% if enrollments %}
  <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Course Code</th>
        <th>Course Name</th>
        <th>Term</th>
        <th>Year</th>
        <th>Status</th>
        <th>Grade</th>
      </tr>
    </thead>

    <tbody>
      {% for e in enrollments %}
      <tr>
        <td>{{ e.course_code }}</td>
        <td>{{ e.course_name }}</td>
        <td>{{ e.term }}</td>
        <td>{{ e.year }}</td>
        <td>{{ e.status }}</td>
        <td>{{ e.grade if e.grade is not none else '-' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% else %}
  <p class="text-muted">This student has no enrollments yet.</p>
  {% endif %}

</div>

{% endblock %}