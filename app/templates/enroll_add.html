{% extends "base.html" %}
{% block title %}Enroll Student{% endblock %}

{% block content %}

<div class="card shadow p-4">

  <h3 class="mb-3">Enroll Student</h3>

  <!-- Student Info -->
  <div class="alert alert-secondary">
    <strong>Student:</strong> {{ student.first_name }} {{ student.last_name }}
    <span class="text-muted">(ID: {{ student.student_id }})</span>
  </div>

  <form method="POST" action="{{ url_for('main.enroll_submit', student_id=student.student_id) }}">

    <!-- Course Selection -->
    <div class="mb-3">
      <label class="form-label"><strong>Select Course</strong></label>
      <select class="form-select" name="course_id" required>
        <option value="">-- Choose a Course --</option>

        {% for c in courses %}
        <option value="{{ c.course_id }}">
          {{ c.course_code }} - {{ c.course_name }}
          (Credits: {{ c.credits }}, {{ c.enrolled_count }}/{{ c.capacity }} enrolled)

        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Semester Selection -->
    <div class="mb-3">
      <label class="form-label"><strong>Select Semester</strong></label>
      <select class="form-select" name="semester_id" required>
        <option value="">-- Choose a Semester --</option>

        {% for s in semesters %}
        <option value="{{ s.semester_id }}">
          {{ s.term }} {{ s.year }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Submit + Cancel -->
    <div class="mt-4">
      <button type="submit" class="btn btn-primary">
        âœ“ Confirm Enrollment
      </button>

      <a href="{{ url_for('main.student_detail', student_id=student.student_id) }}" class="btn btn-secondary ms-2">
        Cancel
      </a>
    </div>

  </form>
</div>

{% endblock %}